FROM centos/devtoolset-6-toolchain-centos7

USER 0

RUN yum install -y make perl wget sudo which file flex bison \
                   python3-devel python-devel python-pip python3-pip pyyaml openmpi3-devel \
                   hwloc-devel freeglut-devel

RUN echo module load mpi >> /etc/profile.d/sh.local

USER 1001

ENV OMPI_MCA_rmaps_base_oversubscribe=1
RUN pip3 install --user pyyaml
